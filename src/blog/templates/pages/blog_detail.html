{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}

{% include 'components/blog/off-canvas-menu.html' %}

<!-- back button -->
<div class='py-2'>
  <button class='btn btn-primary'>back</button>
</div>

<!-- blog post card -->
<div id='blog-post'>
  loading.....
</div>

<div class='container'>
  <div class='card mb-2 py-2 px-2'>
      <h4 class='card-title'>comments</h4>
      {% if user.is_authenticated %}
        {% include 'components/comments/create_form.html' %}
      {% else %}
        <h5 class=card-text><a href='/users/login'>log in</a> to post a comment. don't have an account? <a href='/users/register'>register here.</a></h5>
      {% endif %}
    <div id='comment-section' class='my-2'>
      loading comments...
    </div>
  </div>
</div>

<script>
  var requestPath = '{{ request.path }}'
  var requestUserIsAuthenticated = '{{ request.user.is_authenticated }}' == 'True' ? true : false
  var requestUser = '{{ request.user }}'
</script>
<script type='module' src='{% static "comments/load-blog-comments.js" %}'></script>
<script type='module' src='{% static "blog/load-blog-post-detail.js" %}'></script>

{% endblock %}
